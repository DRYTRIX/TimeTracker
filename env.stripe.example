# ============================================================================
# STRIPE BILLING CONFIGURATION
# ============================================================================
# Copy this file to .env and fill in your actual Stripe credentials
# 
# Get your keys from: https://dashboard.stripe.com/apikeys
# Create products at: https://dashboard.stripe.com/products
# ============================================================================

# ----------------------------------------------------------------------------
# Stripe API Keys (REQUIRED)
# ----------------------------------------------------------------------------
# Test keys (for development - start with sk_test_ and pk_test_)
STRIPE_SECRET_KEY=sk_test_your_secret_key_here
STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# Production keys (for production - start with sk_live_ and pk_live_)
# STRIPE_SECRET_KEY=sk_live_your_live_secret_key_here
# STRIPE_PUBLISHABLE_KEY=pk_live_your_live_publishable_key_here

# ----------------------------------------------------------------------------
# Webhook Secret (REQUIRED for webhook verification)
# ----------------------------------------------------------------------------
# Get from Stripe Dashboard → Developers → Webhooks → [Your endpoint] → Signing secret
# Or use `stripe listen --print-secret` for local development
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# ----------------------------------------------------------------------------
# Product Price IDs (REQUIRED)
# ----------------------------------------------------------------------------
# Create products in Stripe Dashboard → Products
# Copy the Price ID (starts with price_) for each product

# Single User Plan (€5/month, quantity=1)
STRIPE_SINGLE_USER_PRICE_ID=price_xxxxxxxxxxxxxxxxxxxxx

# Team Plan (€6/user/month, quantity=number of seats)
STRIPE_TEAM_PRICE_ID=price_xxxxxxxxxxxxxxxxxxxxx

# ----------------------------------------------------------------------------
# Trial Configuration (OPTIONAL)
# ----------------------------------------------------------------------------
# Enable/disable free trial periods
STRIPE_ENABLE_TRIALS=true

# Number of trial days (default: 14)
STRIPE_TRIAL_DAYS=14

# ----------------------------------------------------------------------------
# Proration Settings (OPTIONAL)
# ----------------------------------------------------------------------------
# Enable proration when seats are added/removed mid-billing cycle
# If enabled, customers are charged/credited proportionally
STRIPE_ENABLE_PRORATION=true

# ----------------------------------------------------------------------------
# Tax Configuration (OPTIONAL)
# ----------------------------------------------------------------------------
# Tax behavior for prices
# - 'exclusive': Tax added on top of price (recommended)
# - 'inclusive': Tax included in price
STRIPE_TAX_BEHAVIOR=exclusive

# ============================================================================
# SETUP INSTRUCTIONS
# ============================================================================
#
# 1. CREATE STRIPE ACCOUNT
#    - Sign up at https://stripe.com
#    - Complete account verification
#
# 2. GET API KEYS
#    - Go to: https://dashboard.stripe.com/apikeys
#    - Copy both Publishable and Secret keys
#    - Use test keys for development (sk_test_* and pk_test_*)
#
# 3. CREATE PRODUCTS
#    - Go to: https://dashboard.stripe.com/products
#    - Create "TimeTracker Single User" product:
#      * Price: €5.00
#      * Billing: Monthly recurring
#      * Currency: EUR
#    - Create "TimeTracker Team" product:
#      * Price: €6.00  
#      * Billing: Monthly recurring
#      * Currency: EUR
#      * Enable quantity-based pricing
#    - Copy the Price IDs (price_*)
#
# 4. CONFIGURE WEBHOOKS
#    - Go to: https://dashboard.stripe.com/webhooks
#    - Add endpoint: https://your-domain.com/billing/webhooks/stripe
#    - Select events:
#      * invoice.paid
#      * invoice.payment_failed
#      * invoice.payment_action_required
#      * customer.subscription.created
#      * customer.subscription.updated
#      * customer.subscription.deleted
#      * customer.subscription.trial_will_end
#    - Copy the Signing Secret (whsec_*)
#
# 5. ENABLE CUSTOMER PORTAL
#    - Go to: https://dashboard.stripe.com/settings/billing/portal
#    - Click "Activate test link"
#    - Enable features:
#      * Update subscription
#      * Cancel subscription
#      * Update payment method
#      * View invoice history
#
# 6. ENABLE STRIPE TAX (for EU VAT)
#    - Go to: https://dashboard.stripe.com/settings/tax
#    - Enable automatic tax calculation
#    - Add your business location
#
# 7. RUN DATABASE MIGRATION
#    psql -U timetracker -d timetracker -f migrations/add_stripe_billing_fields.sql
#
# 8. RESTART APPLICATION
#    The application will now use Stripe for billing
#
# ============================================================================
# LOCAL DEVELOPMENT WITH WEBHOOKS
# ============================================================================
#
# Install Stripe CLI:
#   brew install stripe/stripe-cli/stripe  (macOS)
#   scoop install stripe                   (Windows)
#
# Login to Stripe:
#   stripe login
#
# Forward webhooks to localhost:
#   stripe listen --forward-to localhost:5000/billing/webhooks/stripe
#
# This will output a webhook secret - add it to STRIPE_WEBHOOK_SECRET above
#
# Test webhooks:
#   stripe trigger invoice.paid
#   stripe trigger invoice.payment_failed
#   stripe trigger customer.subscription.updated
#
# ============================================================================
# TEST CARDS (Test Mode Only)
# ============================================================================
#
# Success:     4242 4242 4242 4242
# Decline:     4000 0000 0000 0002  
# 3D Secure:   4000 0025 0000 3155
#
# Use any future expiry date (e.g., 12/34)
# Use any 3-digit CVC (e.g., 123)
# Use any ZIP code (e.g., 12345)
#
# More test cards: https://stripe.com/docs/testing
#
# ============================================================================
# SECURITY NOTES
# ============================================================================
#
# ⚠️  NEVER commit this file with real credentials to version control
# ⚠️  Use different keys for test and production environments
# ⚠️  Rotate keys regularly in production
# ⚠️  Store production keys in secure secrets manager (e.g., AWS Secrets Manager)
# ⚠️  Enable Stripe Radar for fraud protection
# ⚠️  Monitor webhook logs for suspicious activity
#
# ============================================================================

